package rancher2

import (
	"testing"

	"github.com/hashicorp/terraform-plugin-sdk/v2/helper/resource"
)

func TestAccRancher2CertificateDataSource_Project(t *testing.T) {
	testAccCheckRancher2CertificateProjectDataSourceConfig := testAccRancher2CertificateConfig + `
data "` + testAccRancher2CertificateType + `" "foo" {
  name = rancher2_certificate.foo.name
  project_id = rancher2_certificate.foo.project_id
}
`
	name := "data." + testAccRancher2CertificateType + ".foo"
	resource.Test(t, resource.TestCase{
		PreCheck:          func() { testAccPreCheck(t) },
		ProviderFactories: testAccProviders,
		Steps: []resource.TestStep{
			{
				Config: testAccCheckRancher2CertificateProjectDataSourceConfig,
				Check: resource.ComposeTestCheckFunc(
					resource.TestCheckResourceAttr(name, "name", "foo"),
					resource.TestCheckResourceAttr(name, "description", "Terraform certificate acceptance test"),
					resource.TestCheckResourceAttr(name, "certs", "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUdVVENDQkRtZ0F3SUJBZ0lKQVBueUo1cVAyRUovTUEwR0NTcUdTSWIzRFFFQkJRVUFNSGd4Q3pBSkJnTlYKQkFZVEFsVlRNUk13RVFZRFZRUUlFd3BEWVd4cFptOXlibWxoTVJJd0VBWURWUVFIRXdsRGRYQmxjblJwYm04eApGVEFUQmdOVkJBb1RERkpoYm1Ob1pYSWdUR0ZpY3pFTk1Bc0dBMVVFQ3hNRVZHVnpkREVhTUJnR0ExVUVBeE1SCmRHVnpkQzUwWlhKeVlXWnZjbTB1YVc4d0hoY05NVGt3T1RBeU1UY3lOekF5V2hjTk1qa3dPRE13TVRjeU56QXkKV2pCNE1Rc3dDUVlEVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFU01CQUdBMVVFQnhNSgpRM1Z3WlhKMGFXNXZNUlV3RXdZRFZRUUtFd3hTWVc1amFHVnlJRXhoWW5NeERUQUxCZ05WQkFzVEJGUmxjM1F4CkdqQVlCZ05WQkFNVEVYUmxjM1F1ZEdWeWNtRm1iM0p0TG1sdk1JSUNJakFOQmdrcWhraUc5dzBCQVFFRkFBT0MKQWc4QU1JSUNDZ0tDQWdFQXFwUEE5bXBZM1Uwa1N3d1hQRE5ockhBNkhNcGR6WncyeHRKNW56SkE5OW01K1JzUgpaSkg2MXg0VWpzZDRrT1NDY01GRFBHSzIxYVBScFJxaTY1cWt5V1BlVVNHWEJBUUlTOE1iWmpsbHYyaFhTZmlyCmFGb1Jtbk9FOVVNT0ZlWGxEK1kxeVZ4VDhvVDFhQ0RyTDRtYTZ0UURHWU9aUTZqSVNzc1VJN29Oc0hDdG02c3QKcmN1S3N4SHVqOFNLUnAyeDJFUzR2RE43ZkFZYkJsK0NUSXFodDRScUdqWDc2Y0ZRSWs0U215dU8ycWtkdC9mVQpqdlJLeTJPUnQ2MXluN0s0SFA4VU5YRUdZN1lKaGxMTVJ3bExkaWMwMk9OQXFvaUJUOXlvcnBPMFAwNzh4VFFOCmI3bnV5WTBnNTQwOHpuNStrRFJWWENmOW00b0tPU2FadTV0Um1jTkc3b0dteTArTVRzSmxhQXFpTTY3c3RsamMKNUFVRTB4RW1HMStPU2UxeXZNYnBRd21XZC9sK2tWMC9MRFZSS0NXYXVLaUppM29JMFZTQ1JyY2I2ZE9JVnFEcwp6alNZTDRIekx4U1h1dU8zeDdlczZNRWhrTE05SS9WWEFheGM0aDRTdUhUSDJaZzBiWGw1K1BHUWJxenFvMWlMCmE4WHM4N0l1UmdNUlJLb1ZiVHc4SGIzWG1jSFcvSnYvMnJ6dlBxR0xpbmVhZmZ1R2ttQXZpYm5id1hVa1hHY2oKZ1RjSWR1V0dTcS9FZmNjbEMxTHN6RXN6dnltWU5UVjRYdHNGT0sreTRXREgvMVUwY0RmaSs2d09qRXZDM2cxSgpESThqWHRGbEFKU3FjL2dJSWJUUTQyaGtQZnpqZ2hjNVdzUVRNOG1NN1pmaHJkOERGY2FSSW5ob1RZVUNBd0VBCkFhT0IzVENCMmpBZEJnTlZIUTRFRmdRVW92VUNncW9SYXpFcTBJSmlkelZrNkZTd2d3c3dnYW9HQTFVZEl3U0IKb2pDQm40QVVvdlVDZ3FvUmF6RXEwSUppZHpWazZGU3dnd3VoZktSNk1IZ3hDekFKQmdOVkJBWVRBbFZUTVJNdwpFUVlEVlFRSUV3cERZV3hwWm05eWJtbGhNUkl3RUFZRFZRUUhFd2xEZFhCbGNuUnBibTh4RlRBVEJnTlZCQW9UCkRGSmhibU5vWlhJZ1RHRmljekVOTUFzR0ExVUVDeE1FVkdWemRERWFNQmdHQTFVRUF4TVJkR1Z6ZEM1MFpYSnkKWVdadmNtMHVhVytDQ1FENThpZWFqOWhDZnpBTUJnTlZIUk1FQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQlFVQQpBNElDQVFBaWl1UDNzSWlDKzQ5TUQ2R2UxbDFSZ24rbTlsUUNXMGRQVmIwMnpheFZoNC9RdjR2SzBSaXhKUjhoCjhxckJTcGJDOTdmWjZDUml6Q1NRZ2Q0R0w5aWxWYjhFNi9JS2xhNGRkdkRvcllvWkhDMkRZV2lYU29JaVppc2cKajMxS0xMZVV5Ky8yZnI5TWMwakZFSXE5aW5Vamd3ZTlZTmdRcTBEUUZzN3VkaHlGYXZXZzlxL2ZxUDVkU1FOUgpuTE5lRzE3NXlnR0NlTTE5YUlsR1hBZUZ2b1JPdVdOZURGN1BId2tHUGdwTTBPMjl2UWU4VTg0dzBqMUtPa3lRCnRFckkzaVJ0QjFhVjA0SmZJdFJObVNNTnNBTDBiUTM3KzRKdWQvYzNsREthMmRUOGFUSFc4U3FSRTYzWUJlY2gKY1hSUmk4ekcvOFRkTXNTYXVLd1kwVSt5UTNZd2EwWGVtbXpDNkROajlwbndNbjRlaVhDVDkrUFh3Mnd5UDdFNQpmTTBQV2NHeU1YcEI0TXNsVXF5OUtjdTc2QmpLdVE1MElpWjV6bmlDUVorRnZtODZwSVFtcnpsZnkreWU3K1RRCnNuY25Gb0p2SjFPZTNvNjVRRWlCWkk0L2FWa1QvVzQ1UmNpNmxUbTN2b2gva0lDZWJYN05UaCtCQ25Qb0tDK1QKVzMvTjhNOFlwaE91YmprK2hSQkxlRE51TEo5TVhMb28vNVdtSGd0TXZnYWdrL2xnL1RLeU12NmRUd0FWWExSNgpjOUNwYlFoaW0wYW9jQjNwTWlwNTlZSkwrd3htMncrekU1ZzIyVkZveUVNNy92a0UyZk1CeXpTVzNhZE1yZW9QCjdEVFdscDZ3eDlMbmxtZzFWUDlXRlJRd3k2K3NRWFkxa2xOeXp1cHdyMmt1V3lucmpRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ=="),
				),
			},
		},
	})
}

func TestAccRancher2CertificateDataSource_Namespaced(t *testing.T) {
	testAccCheckRancher2CertificateNsDataSourceConfig := testAccRancher2CertificateNsConfig + `
data "` + testAccRancher2CertificateType + `" "foo" {
  name = rancher2_certificate.foo-ns.name
  project_id = rancher2_certificate.foo-ns.project_id
  namespace_id = rancher2_certificate.foo-ns.namespace_id
}
`
	name := "data." + testAccRancher2CertificateType + ".foo"
	resource.Test(t, resource.TestCase{
		PreCheck:          func() { testAccPreCheck(t) },
		ProviderFactories: testAccProviders,
		Steps: []resource.TestStep{
			{
				Config: testAccCheckRancher2CertificateNsDataSourceConfig,
				Check: resource.ComposeTestCheckFunc(
					resource.TestCheckResourceAttr(name, "name", "foo-ns"),
					resource.TestCheckResourceAttr(name, "description", "Terraform certificate acceptance test"),
					resource.TestCheckResourceAttr(name, "certs", "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUdVVENDQkRtZ0F3SUJBZ0lKQVBueUo1cVAyRUovTUEwR0NTcUdTSWIzRFFFQkJRVUFNSGd4Q3pBSkJnTlYKQkFZVEFsVlRNUk13RVFZRFZRUUlFd3BEWVd4cFptOXlibWxoTVJJd0VBWURWUVFIRXdsRGRYQmxjblJwYm04eApGVEFUQmdOVkJBb1RERkpoYm1Ob1pYSWdUR0ZpY3pFTk1Bc0dBMVVFQ3hNRVZHVnpkREVhTUJnR0ExVUVBeE1SCmRHVnpkQzUwWlhKeVlXWnZjbTB1YVc4d0hoY05NVGt3T1RBeU1UY3lOekF5V2hjTk1qa3dPRE13TVRjeU56QXkKV2pCNE1Rc3dDUVlEVlFRR0V3SlZVekVUTUJFR0ExVUVDQk1LUTJGc2FXWnZjbTVwWVRFU01CQUdBMVVFQnhNSgpRM1Z3WlhKMGFXNXZNUlV3RXdZRFZRUUtFd3hTWVc1amFHVnlJRXhoWW5NeERUQUxCZ05WQkFzVEJGUmxjM1F4CkdqQVlCZ05WQkFNVEVYUmxjM1F1ZEdWeWNtRm1iM0p0TG1sdk1JSUNJakFOQmdrcWhraUc5dzBCQVFFRkFBT0MKQWc4QU1JSUNDZ0tDQWdFQXFwUEE5bXBZM1Uwa1N3d1hQRE5ockhBNkhNcGR6WncyeHRKNW56SkE5OW01K1JzUgpaSkg2MXg0VWpzZDRrT1NDY01GRFBHSzIxYVBScFJxaTY1cWt5V1BlVVNHWEJBUUlTOE1iWmpsbHYyaFhTZmlyCmFGb1Jtbk9FOVVNT0ZlWGxEK1kxeVZ4VDhvVDFhQ0RyTDRtYTZ0UURHWU9aUTZqSVNzc1VJN29Oc0hDdG02c3QKcmN1S3N4SHVqOFNLUnAyeDJFUzR2RE43ZkFZYkJsK0NUSXFodDRScUdqWDc2Y0ZRSWs0U215dU8ycWtkdC9mVQpqdlJLeTJPUnQ2MXluN0s0SFA4VU5YRUdZN1lKaGxMTVJ3bExkaWMwMk9OQXFvaUJUOXlvcnBPMFAwNzh4VFFOCmI3bnV5WTBnNTQwOHpuNStrRFJWWENmOW00b0tPU2FadTV0Um1jTkc3b0dteTArTVRzSmxhQXFpTTY3c3RsamMKNUFVRTB4RW1HMStPU2UxeXZNYnBRd21XZC9sK2tWMC9MRFZSS0NXYXVLaUppM29JMFZTQ1JyY2I2ZE9JVnFEcwp6alNZTDRIekx4U1h1dU8zeDdlczZNRWhrTE05SS9WWEFheGM0aDRTdUhUSDJaZzBiWGw1K1BHUWJxenFvMWlMCmE4WHM4N0l1UmdNUlJLb1ZiVHc4SGIzWG1jSFcvSnYvMnJ6dlBxR0xpbmVhZmZ1R2ttQXZpYm5id1hVa1hHY2oKZ1RjSWR1V0dTcS9FZmNjbEMxTHN6RXN6dnltWU5UVjRYdHNGT0sreTRXREgvMVUwY0RmaSs2d09qRXZDM2cxSgpESThqWHRGbEFKU3FjL2dJSWJUUTQyaGtQZnpqZ2hjNVdzUVRNOG1NN1pmaHJkOERGY2FSSW5ob1RZVUNBd0VBCkFhT0IzVENCMmpBZEJnTlZIUTRFRmdRVW92VUNncW9SYXpFcTBJSmlkelZrNkZTd2d3c3dnYW9HQTFVZEl3U0IKb2pDQm40QVVvdlVDZ3FvUmF6RXEwSUppZHpWazZGU3dnd3VoZktSNk1IZ3hDekFKQmdOVkJBWVRBbFZUTVJNdwpFUVlEVlFRSUV3cERZV3hwWm05eWJtbGhNUkl3RUFZRFZRUUhFd2xEZFhCbGNuUnBibTh4RlRBVEJnTlZCQW9UCkRGSmhibU5vWlhJZ1RHRmljekVOTUFzR0ExVUVDeE1FVkdWemRERWFNQmdHQTFVRUF4TVJkR1Z6ZEM1MFpYSnkKWVdadmNtMHVhVytDQ1FENThpZWFqOWhDZnpBTUJnTlZIUk1FQlRBREFRSC9NQTBHQ1NxR1NJYjNEUUVCQlFVQQpBNElDQVFBaWl1UDNzSWlDKzQ5TUQ2R2UxbDFSZ24rbTlsUUNXMGRQVmIwMnpheFZoNC9RdjR2SzBSaXhKUjhoCjhxckJTcGJDOTdmWjZDUml6Q1NRZ2Q0R0w5aWxWYjhFNi9JS2xhNGRkdkRvcllvWkhDMkRZV2lYU29JaVppc2cKajMxS0xMZVV5Ky8yZnI5TWMwakZFSXE5aW5Vamd3ZTlZTmdRcTBEUUZzN3VkaHlGYXZXZzlxL2ZxUDVkU1FOUgpuTE5lRzE3NXlnR0NlTTE5YUlsR1hBZUZ2b1JPdVdOZURGN1BId2tHUGdwTTBPMjl2UWU4VTg0dzBqMUtPa3lRCnRFckkzaVJ0QjFhVjA0SmZJdFJObVNNTnNBTDBiUTM3KzRKdWQvYzNsREthMmRUOGFUSFc4U3FSRTYzWUJlY2gKY1hSUmk4ekcvOFRkTXNTYXVLd1kwVSt5UTNZd2EwWGVtbXpDNkROajlwbndNbjRlaVhDVDkrUFh3Mnd5UDdFNQpmTTBQV2NHeU1YcEI0TXNsVXF5OUtjdTc2QmpLdVE1MElpWjV6bmlDUVorRnZtODZwSVFtcnpsZnkreWU3K1RRCnNuY25Gb0p2SjFPZTNvNjVRRWlCWkk0L2FWa1QvVzQ1UmNpNmxUbTN2b2gva0lDZWJYN05UaCtCQ25Qb0tDK1QKVzMvTjhNOFlwaE91YmprK2hSQkxlRE51TEo5TVhMb28vNVdtSGd0TXZnYWdrL2xnL1RLeU12NmRUd0FWWExSNgpjOUNwYlFoaW0wYW9jQjNwTWlwNTlZSkwrd3htMncrekU1ZzIyVkZveUVNNy92a0UyZk1CeXpTVzNhZE1yZW9QCjdEVFdscDZ3eDlMbmxtZzFWUDlXRlJRd3k2K3NRWFkxa2xOeXp1cHdyMmt1V3lucmpRPT0KLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQ=="),
				),
			},
		},
	})
}
